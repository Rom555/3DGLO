(()=>{"use strict";const e=({timing:e,draw:t,duration:n})=>{let r=performance.now();requestAnimationFrame((function o(a){let l=(a-r)/n;l>1&&(l=1);let c=e(l);t(c),l<1&&requestAnimationFrame(o)}))},t=({formId:e,someElem:t=[]})=>{const n=document.getElementById(e),r=document.createElement("div");try{if(!n)throw new Error(`Форма ${e} не найдена`);n.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=n.querySelectorAll("input"),o=new FormData(n),a={};var l;r.style.color="#fff",n.append(r),(e=>{let t=!0;return e.forEach((e=>{switch(!0){case"user_phone"===e.name:!/[^\d\(\)\-\+]/gi.test(e.value)&&e.value||(t=!1);break;case"user_email"===e.name:e.value||(t=!1);break;case"user_name"===e.name:!/[^а-я\s]/gi.test(e.value)&&e.value||(t=!1);break;case"user_message"===e.name:/[^а-я\s\d\.\,\?\!\;\:]/gi.test(e.value)&&(t=!1)}})),t})(e)?(r.innerHTML='\n  <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 60 60" enable-background="new 0 0 0 0" xml:space="preserve" width="60" height="30">\n    <circle fill="#fff" stroke="none" cx="6" cy="50" r="6">\n      <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite"\n        begin="0.1"/>    \n    </circle>\n    <circle fill="#fff" stroke="none" cx="26" cy="50" r="6">\n      <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite" \n        begin="0.2"/>       \n    </circle>\n    <circle fill="#fff" stroke="none" cx="46" cy="50" r="6">\n      <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite" \n        begin="0.3"/>     \n    </circle>\n  </svg>',o.forEach(((e,t)=>{a[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?a[e.id]=t.textContent:"input"===e.type&&(a[e.id]=t.value)})),(l=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{r.textContent="Спасибо! Наш менеджер с Вами свяжется.",e.forEach((e=>{e.value=""}))})).catch((e=>{r.textContent="Ошибка!"}))):r.textContent="Неправильно заполнены поля!"})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds");let o;const a=function(e){return String(e).length<2?"0"+e:e};o=setInterval((()=>{let e=(()=>{let e=(new Date("20 march 2022").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();e.timeRemaining<=0?clearInterval(o):(t.textContent=a(e.hours),n.textContent=a(e.minutes),r.textContent=a(e.seconds))}),1e3)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{(t.target.closest(".menu")||t.target.closest("menu")&&"A"===t.target.tagName||e.classList.contains("active-menu")&&!t.target.closest("menu"))&&(t.preventDefault(),e.classList.toggle("active-menu"))}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup"),r=n.querySelector(".popup-content"),o=n.querySelector("form");n.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(n.style.display="none")})),t.forEach((t=>t.addEventListener("click",(()=>{n.style.display="block",window.screen.width>=768&&e({duration:500,timing:e=>e,draw(e){n.style.width=100*e+"%",r.style.top=20*(e-.5)+"%",r.style.opacity=e,o.style.top=500*(1-e)+"px"}})})))),o.style.position="relative"})(),[...document.querySelectorAll("menu>ul>li>a"),document.querySelector("main>a")].forEach((e=>{const t=e.attributes.href.value;e.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})}))})),(()=>{const e=document.querySelectorAll("form"),t=(e,t,n)=>{let r=e.value;r=r.replace(t,""),r=r.replace(/^[\-\s]+/,""),r=r.replace(/[\-\s]+$/,""),r=r.replace(/\-{2,}/g,"-"),r=r.replace(/\s{2,}/g," "),r&&n&&(r=n(r)),e.value=r},n=e=>e.replace(/([а-я])([а-я]*)/gi,((e,t,n)=>t.toUpperCase()+n.toLowerCase()));e.forEach((e=>{const r=e.querySelector("input[type=text]"),o=e.querySelector('input[placeholder="Ваше сообщение"]'),a=e.querySelector("input[type=email]"),l=e.querySelector("input[type=tel]");r.addEventListener("blur",(()=>{t(r,/[^а-я\-\s]/gi,n)})),o&&o.addEventListener("blur",(()=>{t(o,/[^а-я\-\s\d\.\,\?\!\;\:]/gi)})),a.addEventListener("blur",(()=>{t(a,/[^a-z\d\@\-\_\.\!\~\*\']/gi)})),l.addEventListener("blur",(()=>{t(l,/[^\d\(\)\-\+]/g)}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const r=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===r?(e.classList.add("active"),n[t].classList.remove("d-none")):(e.classList.remove("active"),n[t].classList.add("d-none"))}))}))})(),((e,t,n,r="portfolio-item-active",o="dot",a="dot-active")=>{if(!e||!t||!n)return;const l=document.querySelector("."+e),c=document.querySelectorAll("."+t),s=document.querySelector("."+n);if(!l||!c||!s)return;let i,u=[],d=0;const m=(e,t,n)=>{e[t].classList.remove(n)},p=(e,t,n)=>{e[t].classList.add(n)},v=()=>{m(c,d,r),m(u,d,a),d++,d>=c.length&&(d=0),p(c,d,r),p(u,d,a)},g=(e=2e3)=>{i=setInterval(v,e)};l.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(`.${o}, .portfolio-btn`)&&(m(c,d,r),m(u,d,a),e.target.matches("#arrow-right")?d++:e.target.matches("#arrow-left")?d--:e.target.classList.contains(o)&&u.forEach(((t,n)=>{e.target===t&&(d=n)})),d>=c.length&&(d=0),d<0&&(d=c.length-1),p(c,d,r),p(u,d,a))})),l.addEventListener("mouseenter",(e=>{e.target.matches(`.${o}, .portfolio-btn`)&&clearInterval(i)}),!0),l.addEventListener("mouseleave",(e=>{e.target.matches(`.${o}, .portfolio-btn`)&&g(3e3)}),!0),c.forEach(((e,t)=>{let n=document.createElement("li");n.classList=o+(0===t?" "+a:""),s.append(n),u.push(n)})),g(3e3)})("portfolio-content","portfolio-item","portfolio-dots"),(t=>{const n=document.querySelector(".calc-block"),r=n.querySelector(".calc-type"),o=n.querySelector(".calc-square"),a=n.querySelector(".calc-count"),l=n.querySelector(".calc-day"),c=n.querySelector("#total"),s=()=>{const n=+r.options[r.selectedIndex].value,s=+o.value,i=+c.textContent;let u=0,d=1,m=1;n&&s?(a.value>1&&(d+=+a.value/10),l.value&&l.value<5?m=2:l.value&&l.value<10&&(m=1.5),u=t*n*s*d*m):u=0,e({duration:200,timing:e=>e,draw(e){c.textContent=Math.floor(i+(u-i)*e)}})};n.addEventListener("input",(e=>{if(e.target===r&&s(),e.target===o||e.target===a||e.target===l){if(/\D+/g.test(e.target.value))return void(e.target.value=e.target.value.replace(/\D+/g,""));s()}}))})(100),t({formId:"form1",someElem:[{type:"block",id:"total"}]}),t({formId:"form2",someElem:[{type:"block",id:"total"}]}),t({formId:"form3"})})();